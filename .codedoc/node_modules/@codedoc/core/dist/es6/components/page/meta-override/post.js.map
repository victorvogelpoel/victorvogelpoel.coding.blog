{"version":3,"file":"post.js","sourceRoot":"","sources":["../../../../../src/components/page/meta-override/post.ts"],"names":[],"mappings":"AAGA,SAAS,YAAY,CAAC,IAAkB,EAAE,MAAsB,EAAE,QAA0B,EAAE,QAAgB;IAC5G,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,MAAM,IAAI,CAAC,CAAC;IACvD,IAAI,CAAC,GAAG,EAAE;QACR,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACjC,GAAG,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;KAClC;IAED,IAAI,OAAO,GAAG,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;IAEhD,IAAI,QAAQ,KAAK,SAAS;QAAE,OAAO,GAAG,QAAQ,CAAC;SAC1C;QACH,IAAI,MAAM,KAAK,UAAU;YAAE,OAAO,GAAG;gBACjC,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBACxC,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;aAC1C,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;YACV,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC5D;IAED,GAAG,CAAC,YAAY,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AACvC,CAAC;AAGD,MAAM,UAAU,gBAAgB,CAAC,IAAkB;IACjD,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;QACrE,YAAY,CAAC,IAAI,EACf,SAAS,CAAC,YAAY,CAAC,oBAAoB,CAAmB,EAC9D,CAAC,SAAS,CAAC,YAAY,CAAC,6BAA6B,CAAC,IAAI,SAAS,CAAqB,EACxF,SAAS,CAAC,WAAW,IAAI,EAAE,CAC5B,CAAA;IACH,CAAC,CAAC,CAAC;AACL,CAAC","sourcesContent":["import { OverrideTarget, OverrideBehavior } from './types';\n\n\nfunction overrideMeta(html: HTMLDocument, target: OverrideTarget, behavior: OverrideBehavior, override: string) {\n  let el$ = html.querySelector(`meta[name=\"${target}\"]`);\n  if (!el$) {\n    el$ = html.createElement('meta');\n    el$.setAttribute('name', target);\n  }\n\n  let content = el$.getAttribute('content') || '';\n\n  if (behavior === 'replace') content = override;\n  else {\n    if (target === 'keywords') content = [\n        ...content.split(',').map(_ => _.trim()), \n        ...override.split(',').map(_ => _.trim())\n      ].join(', ');\n    else content = [content.trim(), override.trim()].join(' ');\n  }\n\n  el$.setAttribute('content', content);\n}\n\n\nexport function pageSpecificMeta(html: HTMLDocument) {\n  html.body.querySelectorAll('[data-meta-override]').forEach(override$ => {\n    overrideMeta(html, \n      override$.getAttribute('data-meta-override') as OverrideTarget,\n      (override$.getAttribute('data-meta-override-behavior') || 'replace') as OverrideBehavior,\n      override$.textContent || '',\n    )\n  });\n}\n"]}